# Network

* OSI 7계층
* TCP/IP의 개념
* TCP와 UDP
* TCP와 UDP 헤더 분석

<br>

## OSI 7계층

__OSI(Open System Interconnect)__는 세계표준화기구(ISO)가 제정한 것으로, __'어떤 경로와 방식으로 데이터가 송수신되는가'__를 보여주는 __Network Model__이다.

초기 정리가 되지 못해 어지럽고 복잡했던 네트워크 장치로 인해 회사의 장비마다 호환이 되지 않는 어려움이 있었다. 이런 불편함을 해소하기 위해 네트워크를 7계층으로 분리하면서 OSI라는 표준을 만들었다.



* 계층 분리를 왜하는가?
  * 계층을 역할별로 분리하면서 문제 발생시 문제의 현상을 보았을 때 어떤 계층에 문제가 생겼는지도 파악이 가능하다.

* header
  * 각 계층은 하위계층을 사용하고 현계층의 기능을 포함하여 상위 계층에 제공한다. 그래서 계층구조는 위에서 바라보았을 때 아래층이 안보이는 구조라 볼 수 있다. 따라서 최상위 계층만 보면 그 아래계층을 모두 포함하고 있다.




우리가 이메일을 보낸다고 가정할때 처음 응용계층에서 헤더를 붙여 하위 계층으로 넘겨줍니다. 표현계층은 응용계층에서 내려온 헤더와 이메일 데이터를 하나의 데이터로 간주하게 됩니다. 그래서 다시 자신의 헤더를 붙이게 되지요. 이런 과정은 Encapsulation이라고 합니다.

받은 수신자는 거꾸로 물리계층부터 시작해 헤더의 정보를 확인하고 떼어냅니다. 그리고 난 후 상위 계층으로 데이터를 전달하는 것이죠. 이렇게 헤더를 떼어내는 과정은 Decapsulation이라고 합니다.



### Physical Layer

* 하드웨어 전송 기술로, 전기적/기계적 신호를 주고받는 계층
* 상위계층인 데이터링크계층에서 형성된 데이터 패킷을 전기신호나
  광 신호로 바꾸어 송수신하는 역할
* 데이터의 종류나 오류를 제어하지 않는다
* 전송 단위: bits 0, 1
* 사용처: 통신 케이블, 허브, 리피터 등

<br>

### Data-Link Layer

* Point to Point 간의 신뢰성 있는 전송을 보장하기 위한 계층
* 데이터 패킷을 형성하고 전송하는 것을 규정
* 전송 데이터에 대한 CRC 오류제어가 필요하다.
* 전송 단위: Frame
* 사용처: MAC Address, 스위치, 브릿지

<br>

### Network Layer

*  IP주소를 제공하는 계층이다. 
* 이 IP주소 또한 계층적으로 A,B,C,D클래스로 나누어져 있지만 자세히 다루진 않겠다.
* 데이터에 목적지 주소를 지정하고 전송경로를 결정하는 데 필요한
  조건
* 대표적으로 노드들을 거칠때마다 라우팅(라우터의 NAT 기능 활성화=공유기 역할) 해주는 역할
* 공유기는 하나의 외부 통신선에서 들어오는 요청을 사설망에 연결되어있는 컴퓨터에게 전달해주는 역할을 한다.
* 전송 단위: Packet
* 사용처: 라우터, L3 스위치, IP 공유기

<br>

### Transport Layer

* (End to End)의 사용자들이 데이터를 주고 받을 수 있게 하는 계층
* TCP, SPX 등 프로토콜과 관련된 층으로 데이터 전송,에러복구 및
  흐름제어등과 관련
* 자세한 설명은 TCP/UDP 설명에서
* 전송 단위: Segment
* 사용처: TCP, UDP Protocol

<br>

### Session Layer

* LAN 사용자가 서버에 접속할 때 이를 관리하는 기능
* 

### Presentation Layer

* 코드 간의 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용 계층으로부터 덜어 준다.
* 어플리케이션계층에서 보내오는 데이터를
  아스키코드나 EBCDIC 등 기본코드로 포맷하는 기능
* MIME 인코딩이나 암호화 등의 동작이 이 계층에서 이루어진다.
* 사용처: 데이터의 압축이나 인코딩

<br>

### Application Layer

* 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행하는 계층
* HTTP, FTP 등의 프로토콜이 응용 계층에 속한다.
* 사용처: 파일전송,원격접속, 전자메일 등을 관리







<br>

TCP의 경우 신뢰성있는 통신을 보장한다. 따라서 데이터가 전달되는 과정에서 여러 스위치 라우터 등등을 거치면서 데이터가 잘못 전달되는 현상이나 전달이 안되는 경우 오류제어, 흐름제어를 통해 신뢰성있는 데이터가 전달될 수 있도록 한다.
TCP는 연결시 3-way hanshaking 방식으로 목적지와 상호 패킷을 교환하여 연결한다. 연결을 종료할 때는 4-way hanshaking 방식을 사용한다.
신뢰성 연결과 전달을 보장하는 만큼 중간의 확인과정을 거치고 연결을 계속 유지해야되기 때문에 그만큼의 리소스가 더 들어간다.

UDP 프로토콜의 경우 비연결형 프로토콜로서 데이터를 빠르게 전달하는데에 초점을 두고 있다. 따라서 UDP는 목적지에 데이터가 제대로 전달 되었는지 조차 확인하지 않는다. 그냥 전송하면 끝인 것이다. 이렇게만 말하면 이걸 왜쓰냐라고 할 수 있는데 비연결을 지향하고 데이터를 전달할 때 TCP에 비해 오버헤드가 적다. 그래서 신뢰성 있는 데이터 전송이 필요할 때보다 스트리밍같이 연속적인 특성을 가지고 있는 서비스에 사용한다.

<br>





## 참고자료

* https://velog.io/@dyllis/OSI-7%EA%B3%84%EC%B8%B5-%EC%A0%95%EB%A6%AC
* http://www.tibs.co.kr/network/3/osi72.htm
* https://reakwon.tistory.com/59
* https://faq.hostway.co.kr/index.php?mid=Linux_ETC&page=16&document_srl=1434&m=0
